\chapter{Discussion}

\section{Science}

\section{Porting}





\section{Challenges}

During testing, it was discovered that the Xilinx FPGA flow crashes during
synthesis of large SBlock Matrices. A 1x96x96 large design completes without
problems, a 1x128x128 design however stalls while synthesising SBlocks and
receives a segmentation fault after a few hours. Due to time constraints and the
fact that this issue did not hinder the implementation of new functionality, it
has not been investigated thoroughly. To fully utilize the resources available on the
Convey coprocessor it will have to be resolved however.

The modules that remain implemented in VHDL use custom types extensively. This
makes it difficult to simulate the CARP hardware system as a whole, as no
available simulation tools support mixed-language Verilog/VHDL simulation of
designs using non-standard types. Being unable to simulate the system end-to-end
means that a full synthesis of the system is required in order to test even the
smallest of changes. A full synthesis takes upwards of two hours, even for small
matrix dimensions, resulting in a very long feedback cycle. The optimal way to
resolve this, would be to port the remaining modules to Chisel, and implement
end-to-end test utilizing the C++ simulator generated by the framework. A second
strategy would be to implement custom simulation modules for all modules
blackboxed by Chisel. This would also allow for end-to-end tests in the Chisel
simulator, but in terms of workload required be comparable to actually porting
the system completely. A third solution would be to remove all custom types from
the VHDL parts of the design. This would certainly be quicker than a full port,
but having a fragmented codebase is definitely less desirable in the long term.

\section{Future Work}



\cleardoublepage